import React, { useState } from 'react';
import ChartComponent from '@/components/Chart';

const Icon = ({ path, className = "w-5 h-5" }) => (
    <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" dangerouslySetInnerHTML={{ __html: path }}></svg>
);

const ICONS = {
    sustainableLeaf: '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>',
    waterDrop: '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v.01"></path>',
    cloud: '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"></path>',
};

const InvestorDashboard = () => {
    const [pricePeriod, setPricePeriod] = useState('24h');
    const priceData = { '24h': { labels: ['0h', '4h', '8h', '12h', '16h', '20h', '24h'], data: [9750, 9800, 9700, 9850, 9900, 9950, 10000] }, '7d': { labels: ['T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'CN'], data: [9200, 9350, 9300, 9500, 9700, 9800, 10000] }, '30d': { labels: ['Tuần 1', 'Tuần 2', 'Tuần 3', 'Tuần 4'], data: [8500, 8800, 9200, 10000] } };
    return (<div className="grid grid-cols-1 lg:grid-cols-3 gap-8"><div className="lg:col-span-2 space-y-8"><div className="bg-white p-6 rounded-xl shadow-sm border"><h3 className="font-bold text-lg mb-4">Tổng quan Tài sản</h3><div className="flex flex-col md:flex-row items-start justify-between"><div><p className="text-sm text-gray-500">Tổng Giá trị Danh mục</p><p className="text-4xl font-bold text-gray-900 mt-1">50.500.000 VNĐ</p></div><div className="w-40 h-40 mt-4 md:mt-0"><ChartComponent id="investor-doughnut" type="doughnut" data={{ labels: ['Chứng chỉ xanh đang Stake', 'Chứng chỉ xanh có sẵn'], datasets: [{ data: [3500, 1500], backgroundColor: ['#007BFF', '#28A745'], borderWidth: 0, hoverOffset: 4 }] }} options={{ responsive: true, maintainAspectRatio: false, cutout: '75%', plugins: { legend: { display: true, position: 'bottom', labels: { boxWidth: 12, padding: 15, font: { size: 10 } } } } }} /></div></div></div><div className="bg-white p-6 rounded-xl shadow-sm border"><div className="flex flex-col md:flex-row justify-between items-center mb-4"><h3 className="font-bold text-lg mb-2 md:mb-0">Theo dõi Thị trường (Giá Chứng chỉ xanh)</h3><div className="flex justify-center space-x-1">{['24h', '7d', '30d'].map(period => (<button key={period} onClick={() => setPricePeriod(period)} className={`text-xs px-3 py-1 rounded-full ${pricePeriod === period ? 'bg-blue-100 text-blue-700 font-semibold' : 'bg-gray-100 text-gray-600'}`}>{period}</button>))}</div></div><div className="h-64"><ChartComponent id="investor-line" type="line" data={{ labels: priceData[pricePeriod].labels, datasets: [{ label: 'Giá Chứng chỉ xanh', data: priceData[pricePeriod].data, borderColor: '#007BFF', backgroundColor: 'rgba(0, 123, 255, 0.1)', fill: true, tension: 0.4, pointRadius: 0 }] }} options={{ responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { x: { grid: { display: false } }, y: { grid: { color: '#F3F4F6' } } } }} /></div></div></div><div className="lg:col-span-1 space-y-8"><div className="bg-gradient-to-br from-green-50 to-blue-50 p-6 rounded-xl shadow-sm border"><h3 className="font-bold text-lg mb-4">Dấu ấn Bền vững</h3><div className="space-y-4"><div className="flex items-center"><Icon path={ICONS.sustainableLeaf} className="w-8 h-8 text-green-600 mr-4" /><div><p className="font-bold text-green-800 text-lg">5 kg</p><p className="text-xs text-gray-600">Vật liệu được Tái sinh</p></div></div><div className="flex items-center"><Icon path={ICONS.waterDrop} className="w-8 h-8 text-blue-600 mr-4" /><div><p className="font-bold text-blue-800 text-lg">13,500 Lít</p><p className="text-xs text-gray-600">Nước được Tiết kiệm</p></div></div><div className="flex items-center"><Icon path={ICONS.cloud} className="w-8 h-8 text-gray-600 mr-4" /><div><p className="font-bold text-gray-800 text-lg">25 kg</p><p className="text-xs text-gray-600">Khí CO2 được Giảm thiểu</p></div></div></div></div><div className="bg-white p-6 rounded-xl shadow-sm border"><h3 className="font-bold text-lg mb-4">Danh mục Đầu tư</h3><div className="space-y-4"><div className="bg-gray-50 rounded-lg p-4"><p className="font-semibold text-sm">BST Túi Tote Tái chế</p><p className="text-xs text-gray-500 mt-1">Trạng thái: <span className="font-semibold text-yellow-600">Đang sản xuất</span></p></div><div className="bg-gray-50 rounded-lg p-4"><p className="font-semibold text-sm">Dự án Áo Khoác Patchwork</p><p className="text-xs text-gray-500 mt-1">Trạng thái: <span className="font-semibold text-green-600">Đã hoàn thành</span></p></div></div></div></div></div>);
};

export default InvestorDashboard;